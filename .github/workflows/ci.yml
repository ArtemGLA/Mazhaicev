# .github/workflows/ci.yml

# –ò–º—è —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ GitHub)
name: CI Pipeline (Echo Test)

# –¢—Ä–∏–≥–≥–µ—Ä—ã: –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å?
on:
  # –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –ø—É—à–µ (–æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–º–º–∏—Ç–æ–≤) –≤ –≤–µ—Ç–∫–∏ main –∏–ª–∏ master
  push:
    branches: [ main, master ]
  # –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request'–∞ –≤ —ç—Ç–∏ –≤–µ—Ç–∫–∏
  pull_request:
    branches: [ main, master ]

# –û–ø–∏—Å–∞–Ω–∏–µ jobs (–∑–∞–¥–∞–Ω–∏–π) - —ç—Ç–æ –∫–∞–∫ —ç—Ç–∞–ø—ã –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ, –Ω–æ –æ–Ω–∏ –º–æ–≥—É—Ç –∏–¥—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
jobs:
  # –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—à–µ–π –ø–µ—Ä–≤–æ–π "—Å–±–æ—Ä–æ—á–Ω–æ–π –ª–∏–Ω–∏–∏" (–º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º)
  build-and-test:
    # –ó–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ Ubuntu (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–Ω–Ω–µ—Ä)
    runs-on: ubuntu-latest

    # steps - —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
    steps:
      # 1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥: –∫–ª–æ–Ω–∏—Ä—É–µ–º –∫–æ–¥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤–Ω—É—Ç—Ä—å —Ä–∞–Ω–Ω–µ—Ä–∞
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. –≠—Ç–∞–ø "–°–±–æ—Ä–∫–∞ –ü–û" (–ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç)
      - name: Step 1 - Build (echo)
        run: echo "üî® –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —ç—Ç–∞–ø —Å–±–æ—Ä–∫–∏ (make build)"

      # 3. –≠—Ç–∞–ø "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"
      - name: Step 2 - Test (echo)
        run: |
          echo "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
          echo "–¢–µ—Å—Ç 1 –ø—Ä–æ–π–¥–µ–Ω"
          echo "–¢–µ—Å—Ç 2 –ø—Ä–æ–π–¥–µ–Ω"

      # 4. –≠—Ç–∞–ø "–£–ø–∞–∫–æ–≤–∫–∞ .deb"
      - name: Step 3 - Package (echo)
        run: |
          echo "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ .deb –ø–∞–∫–µ—Ç–∞..."
          echo "–ü–∞–∫–µ—Ç my-program.deb —Å–æ–±—Ä–∞–Ω (—Å–∏–º—É–ª—è—Ü–∏—è)"

      # (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã - –ø–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏–º –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
      - name: Upload fake artifact
        uses: actions/upload-artifact@v4
        with:
          name: my-fake-package
          path: . # –ü–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –≤—Å—é –ø–∞–ø–∫—É –∫–∞–∫ –ø—Ä–∏–º–µ—Ä, –ø–æ—Ç–æ–º –±—É–¥–µ–º –∫–ª–∞—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π .deb
